(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{24:function(e,t,a){e.exports=a(48)},29:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a.n(c),l=(a(29),a(8)),o=a.n(l),u=a(13),s=a(12),m=a(14),d=a(3),p=a(4),h=a(6),f=a(5),E=(a(31),a(11)),b=a(1),v=(a(32),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleQuery=function(t){var a=t.target;e.setState({query:a.value})},e.state={query:""},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.props.funSearchQuery;return r.a.createElement("div",{className:"searchClass"},r.a.createElement("div",null,r.a.createElement("input",{className:"textInput",type:"text",name:"name",value:e,onChange:this.handleQuery,"data-testid":"query-input"}),r.a.createElement("button",{type:"button","data-testid":"query-button",onClick:function(){t(!1,e)}},"Buscar")),r.a.createElement("p",{"data-testid":"home-initial-message"},r.a.createElement("strong",null,"Digite algum termo de pesquisa ou escolha uma categoria.")))}}]),a}(n.Component)),g=(a(33),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).sumValueTotal=function(){var t=localStorage.getItem("carrinho");if(t){var a=JSON.parse(t),n=Object.values(a),r=0;n.forEach((function(e){r+=Number(e.length)*Number(e[0].price)})),e.setState({sumValue:r})}},e.state={sumValue:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.sumValueTotal()}},{key:"render",value:function(){var e=this,t=this.props,a=t.itensCarrinho,n=t.funcAddItem,c=t.funcRemoveItem,i=this.state.sumValue,l=Object.values(a);return r.a.createElement("div",{className:"page-cart"},r.a.createElement("h2",null,"Carrinho de Compras"),l.length>0?l.map((function(t){return r.a.createElement("div",{key:t[0].id,className:"card-cart-product"},r.a.createElement("div",{className:"cart-thumb"},r.a.createElement("img",{src:t[0].thumbnail,alt:t[0].title})),r.a.createElement("div",{className:"cart-title"},r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},t[0].title)),r.a.createElement("div",{className:"cart-quant"},r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",onClick:function(){c(t[0]),e.sumValueTotal()}},"-"),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},t.length),r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",disabled:t.length>=t[0].available_quantity,onClick:function(){n(t[0]),e.sumValueTotal()}},"+")),r.a.createElement("div",{className:"cart-price"},r.a.createElement("p",null,"R$"," ",t[0].price.toFixed(2))))})):r.a.createElement("h2",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"),r.a.createElement("p",{className:"total-value"},r.a.createElement("strong",null,"Valor total da compra:")," ","R$"," ",i.toFixed(2)),r.a.createElement("br",null),r.a.createElement("button",{type:"button"},r.a.createElement(E.b,{to:"/finalizar-compra","data-testid":"checkout-products "},"Finalizar Compras")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(n.Component)),y=(a(42),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.name,n=e.funSearchQuery;return r.a.createElement("div",{className:"category"},r.a.createElement("label",{htmlFor:t},r.a.createElement("input",{type:"radio","data-testid":"category",name:"categorias",id:t,onChange:function(){return n(t,!1)}}),a))}}]),a}(n.Component));function O(){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||t){e.next=4;break}return e.next=3,fetch("https://api.mercadolibre.com/sites/MLB/search?q=".concat(a));case 3:n=e.sent;case 4:if(a||!t){e.next=8;break}return e.next=7,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t));case 7:n=e.sent;case 8:if(!a||!t){e.next=12;break}return e.next=11,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a));case 11:n=e.sent;case 12:return e.next=14,n.json();case 14:return r=e.sent,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=a(17),C=(a(43),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.produto,a=e.funcAddItem;return r.a.createElement("div",{"data-testid":"product",className:"card-product"},r.a.createElement("div",null,r.a.createElement("img",{src:t.thumbnail,alt:t.title})),r.a.createElement("p",{className:"price"},"R$"," ",t.price.toFixed(2)),t.shipping.free_shipping&&r.a.createElement("p",{"data-testid":"free-shipping",className:"frete"},"Frete Gr\xe1tis",r.a.createElement("span",null,r.a.createElement(k.a,null))),r.a.createElement("p",null,r.a.createElement(E.b,{"data-testid":"product-detail-link",to:"/product-detail/".concat(t.id," ")},t.title)),r.a.createElement("button",{type:"button","data-testid":"product-add-to-cart",onClick:function(){a(t)}},"Adicionar ao carrinho"))}}]),a}(n.Component)),x=(a(44),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.resultSearch,a=e.funcAddItem;return r.a.createElement("section",{className:"produto-lista"},t.map((function(e){return r.a.createElement(C,{key:e.id,produto:e,funcAddItem:a})})))}}]),a}(n.Component)),N=(a(45),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).findProducts=function(){var t=e.props,a=t.products,n=t.match.params.id.trim(),r=a.find((function(e){return e.id===n}));e.setState({product:r})},e.searchApi=Object(u.a)(o.a.mark((function t(){var a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,fetch("https://api.mercadolibre.com/items/".concat(a.trim()));case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,e.setState({product:r});case 8:case"end":return t.stop()}}),t)}))),e.addAvaliacao=function(e,t){var a=localStorage.getItem("avaliacao"),n=JSON.parse(a);if(n&&n[t])n[t].push(e),localStorage.setItem("avaliacao",JSON.stringify(n));else{var r=Object(m.a)(Object(m.a)({},n),{},Object(s.a)({},t,[e]));localStorage.setItem("avaliacao",JSON.stringify(r))}},e.avaliacao=function(){var t=e.state.product,a=document.getElementById("emailInput"),n=document.getElementById("comentario"),r=document.querySelectorAll("input[name=nota]"),c=!1;if(r.forEach((function(e){e.checked&&(c=e)})),""===a.value)a.style.border="solid 2px red";else if(c.id){var i={email:a.value,nota:c.id,avaliacaoText:n.value};e.addAvaliacao(i,t.id)}else{document.getElementById("radio-container").style.border="solid 2px red"}e.setState({enviar:"Enviar"})},e.recuperarAvaliacao=function(){var e=localStorage.getItem("avaliacao");return e?JSON.parse(e):{}},e.state={product:{},enviar:"Enviar"},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.searchApi()}},{key:"render",value:function(){var e=this,t=this.state,a=t.product,n=t.enviar,c=this.props.funcAddItem,i=this.recuperarAvaliacao();return r.a.createElement("div",{className:"product-detail"},r.a.createElement("p",{"data-testid":"product-detail-name"},a.title),r.a.createElement("p",null,"R$"," ",a.price),r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:a.thumbnail,alt:a.title})),r.a.createElement("h4",null,"Especifica\xe7\xf5es T\xe9cnicas"),r.a.createElement("ul",null,a.shipping&&a.shipping.free_shipping&&r.a.createElement("li",{"data-testid":"free-shipping"},"Frete Gr\xe1tis"),r.a.createElement("li",null,"Atributos:",a.attributes&&a.attributes.map((function(e){return r.a.createElement("p",{key:e.id},e.name,":"," ",e.value_name)})))),r.a.createElement("div",null,r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",onClick:function(){c(a)}},"Adicionar ao Carrinho")),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"emailInput"}," ","Digite seu email:",r.a.createElement("input",{type:"email",name:"emailInput",id:"emailInput","data-testid":"product-detail-email"})),r.a.createElement("br",null),r.a.createElement("div",{id:"radio-container"},r.a.createElement("p",null,"Adicione uma nota"),r.a.createElement("label",{htmlFor:"1"},r.a.createElement("input",{type:"radio",name:"nota",id:"1","data-testid":"1-rating"}),"1"),r.a.createElement("label",{htmlFor:"2"},r.a.createElement("input",{type:"radio",name:"nota",id:"2","data-testid":"2-rating"}),"2"),r.a.createElement("label",{htmlFor:"3"},r.a.createElement("input",{type:"radio",name:"nota",id:"3","data-testid":"3-rating"}),"3"),r.a.createElement("label",{htmlFor:"4"},r.a.createElement("input",{type:"radio",name:"nota",id:"4","data-testid":"4-rating"}),"4"),r.a.createElement("label",{htmlFor:"5"},r.a.createElement("input",{type:"radio",name:"nota",id:"5","data-testid":"5-rating"}),"5")),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"comentario"},r.a.createElement("textarea",{id:"comentario",rows:"10",cols:"30",placeholder:"Descrava a avalia\xe7\xe3o","data-testid":"product-detail-evaluation"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e.avaliacao()},type:"button","data-testid":"submit-review-btn"},n))),r.a.createElement("div",null,i[a.id]?i[a.id].map((function(e){return r.a.createElement("div",{key:e.email},r.a.createElement("p",null,r.a.createElement("span",null,e.email),r.a.createElement("span",null,e.nota)),r.a.createElement("p",null,e.avaliacaoText))})):r.a.createElement("h3",null,"N\xe3o h\xe1 Avalia\xe7\xf5es")))}}]),a}(r.a.Component)),A=(a(46),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"finalizar-compra"},r.a.createElement("h2",null,"Finalizar Compra"),r.a.createElement("label",{htmlFor:"fullNameInput"},"Nome completo"),r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"checkout-fullname",type:"text",id:"fullNameInput",name:"fullNameInput"})),r.a.createElement("label",{htmlFor:"emailInput"},"Email"),r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"checkout-email",type:"text",id:"emailInput",name:"emailInput"})),r.a.createElement("label",{htmlFor:"cpfInput"},"CPF"),r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"checkout-cpf",type:"text",id:"cpfInput",name:"cpfInput"})),r.a.createElement("label",{htmlFor:"phoneInput"},"Telefone"),r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"checkout-phone",type:"text",id:"phoneInput",name:"phoneInput"})),r.a.createElement("label",{htmlFor:"cepInput"},"CEP"),r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"checkout-cep",type:"text",id:"cepInput",name:"cepInput"})),r.a.createElement("label",{htmlFor:"addressInput"},"Endere\xe7o"),r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"checkout-address",type:"text",id:"addressInput",name:"addressInput"})),r.a.createElement("div",null,r.a.createElement("button",null,"Finalizar")))}}]),a}(n.Component)),F=(a(47),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.quantItemsToCart;return r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(E.b,{to:"/"},"Online Store")),r.a.createElement(E.b,{id:"button-cart",to:"/carrinho","data-testid":"shopping-cart-button"},r.a.createElement(k.b,null),r.a.createElement("span",{"data-testid":"shopping-cart-size"},e)))}}]),a}(n.Component)),w=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).funcAddItem=function(t){var a=t.id,n=localStorage.getItem("carrinho");if(n){var r=JSON.parse(n);r[a]?(r[a].push(t),localStorage.setItem("carrinho",JSON.stringify(r)),e.setState({itensCarrinho:r})):(localStorage.setItem("carrinho",JSON.stringify(Object(m.a)(Object(m.a)({},r),{},Object(s.a)({},a,[t])))),e.setState((function(e){return{itensCarrinho:Object(m.a)(Object(m.a)({},e.itensCarrinho),{},Object(s.a)({},a,[t]))}})))}else localStorage.setItem("carrinho",JSON.stringify(Object(s.a)({},a,[t]))),e.setState({itensCarrinho:Object(s.a)({},a,[t])});e.countItemsToCart()},e.funcRemoveItem=function(t){var a=t.id,n=localStorage.getItem("carrinho"),r=JSON.parse(n);r[a].length>1?r[a].shift(t):delete r[a],localStorage.setItem("carrinho",JSON.stringify(r)),e.setState({itensCarrinho:r}),e.countItemsToCart()},e.countItemsToCart=function(){var t=0,a=localStorage.getItem("carrinho");if(a){var n=JSON.parse(a);Object.values(n).forEach((function(e){t+=e.length})),e.setState({quantItemsToCart:t})}},e.categories=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,O();case 3:t.t1=t.sent,t.t2={categorias:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t)}))),e.searchQuery=function(){var t=Object(u.a)(o.a.mark((function t(a,n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.state.categorieToSearch)||a){t.next=7;break}return t.next=4,j(r,n);case 4:c=t.sent,t.next=10;break;case 7:return t.next=9,j(a,n);case 9:c=t.sent;case 10:e.setState({resultSearch:c.results,categorieToSearch:a});case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.state={categorias:[],resultSearch:[],categorieToSearch:"",itensCarrinho:{},quantItemsToCart:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("carrinho");if(e){var t=JSON.parse(e);this.setState({itensCarrinho:t})}this.categories(),this.countItemsToCart()}},{key:"render",value:function(){var e=this,t=this.state,a=t.categorias,n=t.resultSearch,c=t.itensCarrinho,i=t.quantItemsToCart;return r.a.createElement("div",{className:"App"},r.a.createElement(E.a,null,r.a.createElement(F,{quantItemsToCart:i}),r.a.createElement("main",null,r.a.createElement("aside",null,a.map((function(t){return r.a.createElement(y,{key:t.id,id:t.id,name:t.name,funSearchQuery:e.searchQuery})}))),n.length>0&&r.a.createElement(b.a,{to:"lista-produtos"}),r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",render:function(){return r.a.createElement(v,{funSearchQuery:e.searchQuery})}}),r.a.createElement(b.b,{path:"/finalizar-compra",render:function(e){return r.a.createElement(A,Object.assign({},e,{itensCarrinho:c}))}}),r.a.createElement(b.b,{path:"/carrinho",render:function(){return r.a.createElement(g,{itensCarrinho:c,funcAddItem:e.funcAddItem,funcRemoveItem:e.funcRemoveItem})}}),r.a.createElement(b.b,{path:"/lista-produtos",render:function(t){return r.a.createElement(x,Object.assign({},t,{resultSearch:n,funcAddItem:e.funcAddItem}))}}),r.a.createElement(b.b,{path:"/product-detail/:id",render:function(t){return r.a.createElement(N,Object.assign({},t,{products:n,funcAddItem:e.funcAddItem}))}})))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.a8ec1019.chunk.js.map